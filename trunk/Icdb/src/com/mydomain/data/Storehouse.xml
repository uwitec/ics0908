<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Storehouse">
	<select id="selectStorehouseDef" resultClass="com.mydomain.bean.StorehouseBean">
		SELECT 
		STOREHOUSE.STOREHOUSECODE,
		STOREHOUSE.STOREHOUSENAME,
		STOREHOUSE.STOREHOUSEADDRESS,
		STOREHOUSE.STOREHOUSEDEFAULTCARGO,
		STOREHOUSE.EMPLOYEECODE,
		PE.PERSONNAME
		FROM STOREHOUSE ,
		(SELECT 
		PERSON.PERSONNAME,
		PERSON.PERSONCODE,
		EMPLOYEE.EMPLOYEECODE
		FROM PERSON,EMPLOYEE
		WHERE PERSON.PERSONCODE=EMPLOYEE.PERSONCODE) AS PE 
		WHERE PE.EMPLOYEECODE=STOREHOUSE.EMPLOYEECODE
		AND STOREHOUSE.ISENABLED=1
		AND (STOREHOUSE.STOREHOUSENAME LIKE #storehouseName#
		or STOREHOUSE.STOREHOUSECODE like #storehouseCode#
		or STOREHOUSE.STOREHOUSEADDRESS like #storehouseAddress#
		or STOREHOUSE.STOREHOUSEDEFAULTCARGO like #storehouseDefaultCargo#
		or PE.PERSONNAME like #personName#)
	</select>
	<select id="getStorehouseBean" parameterClass="String" resultClass="com.mydomain.bean.StorehouseBean">
		SELECT 
		STOREHOUSE.STOREHOUSECODE,
		STOREHOUSE.STOREHOUSENAME,
		STOREHOUSE.STOREHOUSEADDRESS,
		STOREHOUSE.STOREHOUSEDEFAULTCARGO,
		STOREHOUSE.EMPLOYEECODE,
		PE.PERSONNAME
		FROM STOREHOUSE ,
		(SELECT 
		PERSON.PERSONNAME,
		PERSON.PERSONCODE,
		EMPLOYEE.EMPLOYEECODE
		FROM PERSON,EMPLOYEE
		WHERE PERSON.PERSONCODE=EMPLOYEE.PERSONCODE) AS PE 
		WHERE PE.EMPLOYEECODE=STOREHOUSE.EMPLOYEECODE
		AND STOREHOUSE.ISENABLED=1
		AND STOREHOUSE.STOREHOUSECODE=#storehouseCode#
	</select>
	<select id="selectAllStorehouseBean"  resultClass="com.mydomain.bean.StorehouseBean">
		SELECT 
		STOREHOUSE.STOREHOUSECODE,
		STOREHOUSE.STOREHOUSENAME,
		STOREHOUSE.STOREHOUSEADDRESS,
		STOREHOUSE.STOREHOUSEDEFAULTCARGO,
		STOREHOUSE.EMPLOYEECODE,
		PE.PERSONNAME
		FROM STOREHOUSE ,
		(SELECT 
		PERSON.PERSONNAME,
		PERSON.PERSONCODE,
		EMPLOYEE.EMPLOYEECODE
		FROM PERSON,EMPLOYEE
		WHERE PERSON.PERSONCODE=EMPLOYEE.PERSONCODE) AS PE 
		WHERE PE.EMPLOYEECODE=STOREHOUSE.EMPLOYEECODE
		AND STOREHOUSE.ISENABLED=1
	</select>
	<insert id="insertStorehouseBean" parameterClass="com.mydomain.bean.StorehouseBean">
		INSERT INTO STOREHOUSE
		(STOREHOUSECODE,STOREHOUSENAME,STOREHOUSEADDRESS,STOREHOUSEDEFAULTCARGO,EMPLOYEECODE,ISENABLED)
		VALUES
		(#storehouseCode#,#storehouseName#,#storehouseAddress#,#storehouseDefaultCargo#,#employeeCode#,1)
	</insert>
	<update id="updateStorehouseBean" parameterClass="com.mydomain.bean.StorehouseBean">
		UPDATE STOREHOUSE
		SET	
		STOREHOUSENAME=#storehouseName#,
		STOREHOUSEADDRESS=#storehouseAddress#,
		STOREHOUSEDEFAULTCARGO=#storehouseDefaultCargo#,
		EMPLOYEECODE=#employeeCode#,
		ISENABLED=1
		WHERE STOREHOUSECODE=#storehouseCode#
	</update>
	<delete id="deleteStorehouseBean" parameterClass="com.mydomain.bean.StorehouseBean">
		UPDATE STOREHOUSE
		SET	
		ISENABLED=0
		WHERE STOREHOUSCODE=#storehouseCode#
	</delete>
</sqlMap>