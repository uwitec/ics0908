<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Struct">
	<select id="selectStructcount" resultClass="com.mydomain.bean.baseset.StructBean">
		SELECT 
		count(*) as countValue
		FROM STRUCT
		WHERE 
		isEnabled!=0
		and
		(locate(#structCode#,structCode)>0
		or locate(#structName#,structName)>0)
	</select>
	<select id="selectStructDef" resultClass="com.mydomain.bean.baseset.StructBean">
		SELECT 
		STRUCTCODE,
		STRUCTNAME
		FROM STRUCT
		WHERE 
		isEnabled!=0
		and
		(locate(#structCode#,structCode)>0
		or locate(#structName#,structName)>0)
		limit #startValue#,#endValue#
	</select>
	<select id="selectAllStructBean" resultClass="com.mydomain.bean.baseset.StructBean">
		SELECT 
		STRUCTCODE,
		STRUCTNAME
		FROM STRUCT
		WHERE 
		isEnabled!=0
	</select>
	<select id="getStructBean" parameterClass="String" resultClass="com.mydomain.bean.baseset.StructBean">
		SELECT 
		STRUCTCODE,
		STRUCTNAME
		FROM STRUCT
		WHERE STRUCTCODE=#structCode#
		and
		isEnabled=1
	</select>
	<insert id="insertStructBean" parameterClass="com.mydomain.bean.baseset.StructBean">
		INSERT INTO 
		STRUCT
		(STRUCTCODE,STRUCTNAME,isEnabled) VALUES
		(#structCode#,#structName#,1)
	</insert>
	<update id="updateStructBean" parameterClass="com.mydomain.bean.baseset.StructBean">
		UPDATE STRUCT
		SET
		STRUCTNAME=#structName#,
		isEnabled=1
		WHERE STRUCTCode=#structCode#
	</update>
	<delete id="deleteStructBean" parameterClass="com.mydomain.bean.baseset.StructBean">
		UPDATE STRUCT
		SET
		isEnabled=0
		WHERE STRUCTCode=#structCode#
	</delete> 
</sqlMap>