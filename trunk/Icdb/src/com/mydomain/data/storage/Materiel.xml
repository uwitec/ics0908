<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="StockInCheckMateriel">
	<typeAlias alias="materiel"
		type="com.mydomain.bean.storage.MaterielBean" />

	<sql id="MATERIEL_COMMON_CONDITION">
		<dynamic prepend="where">
			<isNotEmpty property="materielCode" prepend="and">
				materielCode = #materielCode#
			</isNotEmpty>
			<isNotEmpty property="materielName" prepend="and">
				materielName = #materielName#
			</isNotEmpty>
			<isNotEmpty property="materielPrice" prepend="and">
				materielPrice = #materielPrice#
			</isNotEmpty>
			<isNotEmpty property="materielMadeIn" prepend="and">
				materielMadeIn = #materielMadeIn#
			</isNotEmpty>
			<isNotEmpty property="materielMaxStore" prepend="and">
				materielMaxStore =#materielMaxStore#
			</isNotEmpty>
			<isNotEmpty property="materielMinStore" prepend="and">
				materielMinStore = #materielMinStore#
			</isNotEmpty>
			<isNotEmpty property="materielSpell" prepend="and">
				materielSpell = #materielSpell#
			</isNotEmpty>
			<isNotEmpty property="isEnabled">
				isEnabled = #isEnabled#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="jsonField">
				jsonField = #jsonField#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="materielSize">
				materielSize = #materielSize#
			</isNotEmpty>
			<isNotEmpty property="materielABC" prepend="and">
				materielABC = #materielABC#
			</isNotEmpty>
			<isNotNull property="materielIds" prepend="and">
				materielCode not in
				<iterate open="(" close=")" conjunction="," property="materielIds">
					#materielIds[]#
				</iterate>
			</isNotNull>
		</dynamic>
	</sql>

	<sql id="MATERIEL_COMMON_SELECT">
		<![CDATA[
			select materielCode, materielName, materielMadeIn,
			materielPrice, materielMaxStore, materielMinStore,
			materielSpell, isEnabled, jsonField, materielSize, materielABC
			from Materiel
		]]>
	</sql>

	<select id="SHOW_MATERIEL" resultClass="materiel">
		<include refid="MATERIEL_COMMON_SELECT" />
		<include refid="MATERIEL_COMMON_CONDITION" />
	</select>

	<insert id="ADD_MATERIEL">
		<![CDATA[
			insert into Materiel(
			    materielCode,
				materielName,
				materielMadeIn,
				materielPrice,
				materielMaxStore,
				materielMinStore,
				materielSpell,
				isEnabled,
				jsonField,
				materielSize,
				materielABC
			 )values(
			  	#materielCode#,
				#materielName#,
				#materielMadeIn#,
				#materielPrice#,
				#materielMaxStore#,
				#materielMinStore#,
				#materielSpell#,
				#isEnabled#,
				#jsonField#,
				materielSize,
				materielABC
			)
		]]>
	</insert>


</sqlMap>